import { drizzle } from "drizzle-orm/node-postgres";
import { Client } from "pg";
import bcrypt from "bcrypt";
import { users, posts, categories, comments, likes } from "./schema";
import { randomUUID } from "crypto";
import { imageSizeFromFile } from "image-size/fromFile";
import path from "path";

const client = new Client({
    connectionString: process.env.DATABASE_URL,
});
const db = drizzle(client);
const files = [
    '68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f776174747061642d6d656469612d736572766963652f53746f7279496d6167652f5650722d38464e2d744a515349673d3d2d3234323931353831302e313434336539633161633764383437652e6a7067.jpg',
    'pexels-04iraq-1272398525-29130249.jpg',
    'pexels-159054337-31291737.jpg',
    'pexels-2150004161-31281715.jpg',
    'pexels-2150004161-31281717.jpg',
    'pexels-2150129932-31046982.jpg',
    'pexels-9-1-2150717302-31288874.jpg',
    'pexels-abhyuday-majhi-2150496213-31267082.jpg',
    'pexels-adria-masi-461420600-27372369.jpg',
    'pexels-afatihdagli-31270022.jpg',
    'pexels-afatihdagli-31270026.jpg',
    'pexels-afifi-zakaria-2148327722-31255720.jpg',
    'pexels-ahmet-arikaya-2121624-31255700.jpg',
    'pexels-ahmet-arikaya-2121624-31255701.jpg',
    'pexels-ahmet-arikaya-2121624-31255702.jpg',
    'pexels-ahmet-arikaya-2121624-31255703.jpg',
    'pexels-ahmet-arikaya-2121624-31262595.jpg',
    'pexels-ahmet-arikaya-2121624-31262598.jpg',
    'pexels-ahmet-ciftci-1413580052-31274049.jpg',
    'pexels-ahmet-ciftci-1413580052-31274052.jpg',
    'pexels-ahmet-ciftci-1413580052-31274053.jpg',
    'pexels-ahmet-ciftci-1413580052-31274055.jpg',
    'pexels-ahmet-ciftci-1413580052-31292190.jpg',
    'pexels-ahmet-ciftci-1413580052-31292191.jpg',
    'pexels-ahmet-ciftci-1413580052-31292192.jpg',
    'pexels-ahmet-ciftci-1413580052-31292195.jpg',
    'pexels-ahmet-ciftci-1413580052-31292196.jpg',
    'pexels-aiste-sveikataite-701382-1535407.jpg',
    'pexels-ajdin-coric-504250286-31256657.jpg',
    'pexels-akbar-nemati-220109-12359723.jpg',
    'pexels-alaa-tahssen-2150627811-31285833.jpg',
    'pexels-aleksandra-piasta-2150686739-31271764.jpg',
    'pexels-alexander-bie-2150701713-31280146.jpg',
    'pexels-alexander-mass-748453803-31280463.jpg',
    'pexels-alexisricardoalaurin-22614577.jpg',
    'pexels-alfayed-mohammed-salim-2148840374-31257010.jpg',
    'pexels-alfayed-mohammed-salim-2148840374-31257020.jpg',
    'pexels-alfayed-mohammed-salim-2148840374-31257021.jpg',
    'pexels-alina-rossoshanska-338724645-31281264.jpg',
    'pexels-alina-rossoshanska-338724645-31281265.jpg',
    'pexels-alina-rossoshanska-338724645-31281270.jpg',
    'pexels-alina-rossoshanska-338724645-31281376.jpg',
    'pexels-alina-rossoshanska-338724645-31281383.jpg',
    'pexels-alina-rossoshanska-338724645-31281385.jpg',
    'pexels-alina-rossoshanska-338724645-31281409.jpg',
    'pexels-alperart-31283178.jpg',
    'pexels-altan-kendi-rci-591734586-19918538.jpg',
    'pexels-alwyn-s-2148718134-31253619.jpg',
    'pexels-anderson-ferreira-pereira-2150672050-31263977.jpg',
    'pexels-anderson-ferreira-pereira-2150672050-31263980.jpg',
    'pexels-anderson-ferreira-pereira-2150672050-31263982.jpg',
    'pexels-anderson-ferreira-pereira-2150672050-31279976.jpg',
    'pexels-andrei-tiron-2150681079-31268763.jpg',
    'pexels-andrei-tiron-2150681079-31268791.jpg',
    'pexels-andy-wilson-2150315531-31289268.jpg',
    'pexels-antonio-garcia-prats-1579305-31289818.jpg',
    'pexels-arash-kh-1030567404-31264317.jpg',
    'pexels-arash-kh-1030567404-31264441.jpg',
    'pexels-aristide-ouedraogo-2150626951-31251804.jpg',
    'pexels-aritra-hazra-249157205-31290238.jpg',
    'pexels-aritra-hazra-249157205-31290243.jpg',
    'pexels-aritra-hazra-249157205-31291015.jpg',
    'pexels-arlindphotography-31282954.jpg',
    'pexels-arlindphotography-31282956.jpg',
    'pexels-arlindphotography-31282957.jpg',
    'pexels-arlindphotography-31291871.jpg',
    'pexels-arlindphotography-31291884.jpg',
    'pexels-arlindphotography-31291889.jpg',
    'pexels-arnaud-31290716.jpg',
    'pexels-arnaud-31290735.jpg',
    'pexels-arnaud-31290764.jpg',
    'pexels-aronvisuals-1743165.jpg',
    'pexels-arturoaez220-31285529.jpg',
    'pexels-arzu-madadova-1526652205-31252887.jpg',
    'pexels-aseem-borkar-2150493622-31275253.jpg',
    'pexels-aseem-borkar-2150493622-31275254.jpg',
    'pexels-atman-bouba-106556929-31266746.jpg',
    'pexels-ayobami-61080370-28509897.jpg',
    'pexels-barnabas-davoti-31615494-31253064.jpg',
    'pexels-barnabas-davoti-31615494-31253065.jpg',
    'pexels-barnabas-davoti-31615494-31253508.jpg',
    'pexels-benprater-31284513 (1).jpg',
    'pexels-benprater-31284513.jpg',
    'pexels-bigshowlamar-31273569.jpg',
    'pexels-billelmoula-540518.jpg',
    'pexels-blazearth-31274258.jpg',
    'pexels-bradikan-29560818.jpg',
    'pexels-brian-phetmeuangmay-118167615-31288677.jpg',
    'pexels-brian-phetmeuangmay-118167615-31288765.jpg',
    'pexels-burak-30049814.jpg',
    'pexels-burcinaltny7-31282757.jpg',
    'pexels-burcinaltny7-31282761.jpg',
    'pexels-burcinaltny7-31282763.jpg',
    'pexels-burcinaltny7-31282764.jpg',
    'pexels-burockwood-31259763.jpg',
    'pexels-bymuratisikofficial-31282368.jpg',
    'pexels-cagla-jpeg-279980034-31270228.jpg',
    'pexels-caglar-gelmis-762374035-31269720.jpg',
    'pexels-calvinseng-31288944.jpg',
    'pexels-calvinseng-31291108.jpg',
    'pexels-calvinseng-31291109.jpg',
    'pexels-catalin-todosia-876894548-31276608.jpg',
    'pexels-catalin-todosia-876894548-31276609.jpg',
    'pexels-catalin-todosia-876894548-31276611.jpg',
    'pexels-catalin-todosia-876894548-31276612.jpg',
    'pexels-catalin-todosia-876894548-31276614.jpg',
    'pexels-cero-cero-2150720468-31290500.jpg',
    'pexels-cero-cero-2150720468-31290508.jpg',
    'pexels-cero-cero-2150720468-31290541.jpg',
    'pexels-cero-cero-2150720468-31290548.jpg',
    'pexels-cero-cero-2150720468-31290550.jpg',
    'pexels-chente8888-31283715.jpg',
    'pexels-christian-alemu-127251395-31289002.jpg',
    'pexels-christina99999-31290065.jpg',
    'pexels-christina99999-31290076.jpg',
    'pexels-christopher-welsch-leveroni-2150186467-31287363.jpg',
    'pexels-clement-proust-363898785-31262257.jpg',
    'pexels-clement-proust-363898785-31262258.jpg',
    'pexels-coldbeer-277046249-31280786.jpg',
    'pexels-constantinos-chaidalis-1848207-31265594.jpg',
    'pexels-couleur-31290355.jpg',
    'pexels-couleur-31290518.jpg',
    'pexels-craigmdennis-31254345.jpg',
    'pexels-da-na-461418424-31249983.jpg',
    'pexels-damir-31271229.jpg',
    'pexels-damir-31271231.jpg',
    'pexels-dariaobymaha-1684026.jpg',
    'pexels-david-kanigan-239927285-31293615.jpg',
    'pexels-dax-dexter-delada-2150239947-31044632.jpg',
    'pexels-dbaler-13627440.jpg',
    'pexels-decheng-wang-2150410129-31275706.jpg',
    'pexels-decheng-wang-2150410129-31275768.jpg',
    'pexels-dianpraditaputri-31291146.jpg',
    'pexels-dianpraditaputri-31291147.jpg',
    'pexels-diogo-santos-2150159555-31271337.jpg',
    'pexels-dirk-pothen-2149332904-31280988.jpg',
    'pexels-diva-31265962.jpg',
    'pexels-diva-31265965.jpg',
    'pexels-diva-31280218.jpg',
    'pexels-diva-31280227.jpg',
    'pexels-diva-31280228.jpg',
    'pexels-diva-31293132.jpg',
    'pexels-diva-31293277.jpg',
    'pexels-diva-31293281.jpg',
    'pexels-diva-31293292.jpg',
    'pexels-dora-koprivica-2150716763-31288694.jpg',
    'pexels-dpranka-11672976.jpg',
    'pexels-drmkhawarnazir-31278860.jpg',
    'pexels-duichantran-31267132.jpg',
    'pexels-duygu-ozturk-2150668926-31272164.jpg',
    'pexels-duygu-ozturk-2150668926-31272167.jpg',
    'pexels-ebrart-p-748409988-20105987.jpg',
    'pexels-edwin-huarca-chile-190129389-31287396.jpg',
    'pexels-edy-ramirez-789177191-31264261.jpg',
    'pexels-edy-ramirez-789177191-31264265.jpg',
    'pexels-efrem-efre-2786187-31267431.jpg',
    'pexels-efrem-efre-2786187-31267471.jpg',
    'pexels-efrem-efre-2786187-31275382.jpg',
    'pexels-efrem-efre-2786187-31275384.jpg',
    'pexels-efrem-efre-2786187-31290336.jpg',
    'pexels-efrem-efre-2786187-31290844.jpg',
    'pexels-efrem-efre-2786187-31290846.jpg',
    'pexels-efren-ftz-365656346-14684032.jpg',
    'pexels-eismayeel93-31290324.jpg',
    'pexels-ejov-igor-1726422-31251407.jpg',
    'pexels-ejov-igor-1726422-31251409.jpg',
    'pexels-ejov-igor-1726422-31251412.jpg',
    'pexels-ejov-igor-1726422-31251415.jpg',
    'pexels-ekrulila-30754439.jpg',
    'pexels-elif-525070928-31252958.jpg',
    'pexels-elif-525070928-31252959.jpg',
    'pexels-elif-525070928-31292124.jpg',
    'pexels-emiliano-lara-2150347322-31284010.jpg',
    'pexels-emre-ayata-1859331980-30147888.jpg',
    'pexels-emre-varisli-506660537-16145003.jpg',
    'pexels-eren-31263958.jpg',
    'pexels-eren-arici-718198662-31269382.jpg',
    'pexels-eren-arici-718198662-31269389.jpg',
    'pexels-erick-macenkewicz-202979620-17902802.jpg',
    'pexels-ericyeich-31270441.jpg',
    'pexels-errolson-gonito-2150709887-31284710.jpg',
    'pexels-errolson-gonito-2150709887-31284722.jpg',
    'pexels-errolson-gonito-2150709887-31284723.jpg',
    'pexels-errolson-gonito-2150709887-31284732.jpg',
    'pexels-esrannuur-129682465-18966860.jpg',
    'pexels-estelle-blackmoone-2148313089-31260440.jpg',
    'pexels-estelle-blackmoone-2148313089-31289217.jpg',
    'pexels-eugenia-remark-5767088-31042830.jpg',
    'pexels-evgeni-adutskevich-363025374-19272394.jpg',
    'pexels-fabnel-ldn-2147803336-31273768.jpg',
    'pexels-felix-young-449360607-31260993.jpg',
    'pexels-felix-young-449360607-31272217.jpg',
    'pexels-felix-young-449360607-31287197.jpg',
    'pexels-fotios-photos-31264508.jpg',
    'pexels-freestockpro-31270768.jpg',
    'pexels-freestockpro-31270769.jpg',
    'pexels-g-y-1696590236-31285211.jpg',
    'pexels-g-y-1696590236-31285270.jpg',
    'pexels-gabriele-donofrio-2150198707-31262774.jpg',
    'pexels-gabriele-donofrio-2150198707-31275809.jpg',
    'pexels-gantas-3808041.jpg',
    'pexels-gantas-3808042.jpg',
    'pexels-gantas-4506435.jpg',
    'pexels-gantas-5350997.jpg',
    'pexels-gantas-5594249.jpg',
    'pexels-gerbiamas-ponas-stonys-359394-1696742.jpg',
    'pexels-giuseppe-de-bergolis-416966285-31276661.jpg',
    'pexels-gregory-vanhuyse-2150354808-31096175.jpg',
    'pexels-hamed-farahpour-746811819-31276273.jpg',
    'pexels-hanifi-sarikaya-2146429225-31250778.jpg',
    'pexels-hanifi-sarikaya-2146429225-31250829.jpg',
    'pexels-hanifi-sarikaya-2146429225-31250830.jpg',
    'pexels-harem-1617688755-27525948.jpg',
    'pexels-harrison-reilly-78972762-27300857.jpg',
    'pexels-harrison-reilly-78972762-27300906.jpg',
    'pexels-harrison-reilly-78972762-28480522.jpg',
    'pexels-harrison-reilly-78972762-31291545.jpg',
    'pexels-harrison-reilly-78972762-31291546.jpg',
    'pexels-harrison-reilly-78972762-31291551.jpg',
    'pexels-harrison-reilly-78972762-31291553.jpg',
    'pexels-hashtag-melvin-1163687-31285201.jpg',
    'pexels-helen1-31277840.jpg',
    'pexels-helen1-31277842.jpg',
    'pexels-helen1-31277850.jpg',
    'pexels-helen1-31277854.jpg',
    'pexels-helen1-31277855.jpg',
    'pexels-helen1-31277857.jpg',
    'pexels-helen1-31277858.jpg',
    'pexels-helen1-31277860.jpg',
    'pexels-helen1-31277861.jpg',
    'pexels-helen1-31277865.jpg',
    'pexels-helen1-31277866.jpg',
    'pexels-helen1-31277869.jpg',
    'pexels-helen1-31277871.jpg',
    'pexels-helen1-31277872.jpg',
    'pexels-hemant-singh-chauhan-639506990-31250147.jpg',
    'pexels-hemant-singh-chauhan-639506990-31250156.jpg',
    'pexels-hh-meddia_-2148575819-31285757.jpg',
    'pexels-hs-studio-by-hussnain-595837849-31274172.jpg',
    'pexels-huseyn-ibadzade-743775288-31270065.jpg',
    'pexels-huseyn-ibadzade-743775288-31270070.jpg',
    'pexels-huseyn-ibadzade-743775288-31270072.jpg',
    'pexels-huseyn-ibadzade-743775288-31270088.jpg',
    'pexels-huseyn-ibadzade-743775288-31270100.jpg',
    'pexels-hussein-altameemi-782843-31287006.jpg',
    'pexels-hussein-altameemi-782843-31287008.jpg',
    'pexels-huuhuynh-31275580.jpg',
    'pexels-huuhuynh-31275653.jpg',
    'pexels-i-sa-kilavuzoglu-2147500545-30528098.jpg',
    'pexels-ik-2149553283-31269413.jpg',
    'pexels-ingere-31282995.jpg',
    'pexels-innamykytas-31282202.jpg',
    'pexels-irina-sakovich-2150710912-31285274.jpg',
    'pexels-iurii-laimin-78973777-11371456.jpg',
    'pexels-jackson-zl-2150682607-31283745.jpg',
    'pexels-jakewymoore-11110467.jpg',
    'pexels-james-bat-barrera-754630875-31271938.jpg',
    'pexels-james-ibung-2150613499-31266903.jpg',
    'pexels-james-ibung-2150613499-31290706.jpg',
    'pexels-james-ibung-2150613499-31290709.jpg',
    'pexels-jan-van-der-wolf-11680885-31283097.jpg',
    'pexels-jan-van-der-wolf-11680885-31283317.jpg',
    'pexels-jan-van-der-wolf-11680885-31283338.jpg',
    'pexels-janeth-portezo-druzinec-2150618011-31279340.jpg',
    'pexels-janeth-portezo-druzinec-2150618011-31279344.jpg',
    'pexels-jason-pittman-1808114732-28357077.jpg',
    'pexels-jayce-q-132128526-31292588.jpg',
    'pexels-jayce-q-132128526-31292606.jpg',
    'pexels-jayngai-11684329.jpg',
    'pexels-jean-paul-wright-39375669-31270596.jpg',
    'pexels-jgcachafeiro-85164893-31284840.jpg',
    'pexels-jimmykphotos-31269959.jpg',
    'pexels-jimmykphotos-31269974.jpg',
    'pexels-jimmykphotos-31271241.jpg',
    'pexels-jimmykphotos-31286566.jpg',
    'pexels-jonathan-valdes-286676880-31286225.jpg',
    'pexels-jonathan-valdes-286676880-31286226.jpg',
    'pexels-jonathanborba-31266786.jpg',
    'pexels-joseph-russo-430180075-31285311.jpg',
    'pexels-jovydas-3113541.jpg',
    'pexels-jovydas-3366171.jpg',
    'pexels-julia-iskova-2148948682-31280745.jpg',
    'pexels-julias-torten-und-tortchen-434418-31001261.jpg',
    'pexels-justice-lopez-564881319-31280499.jpg',
    'pexels-kai-seeliger-806256538-31281633.jpg',
    'pexels-karolina-wv-20194713-6929329.jpg',
    'pexels-karolina-wv-20194713-6929330.jpg',
    'pexels-karolissamuolis-241325.jpg',
    'pexels-kirsten-salazar-2150504806-31171586.jpg',
    'pexels-km-wong-322737375-31254844.jpg',
    'pexels-kokorevas-10568929.jpg',
    'pexels-koolshooters-6982998.jpg',
    'pexels-krista-glizdeniece-2150567376-31278611.jpg',
    'pexels-kuanysh-1481608.jpg',
    'pexels-l-ng-gia-d-t-1458093-31276226.jpg',
    'pexels-l-ng-gia-d-t-1458093-31276229.jpg',
    'pexels-lauripoldre-31255587.jpg',
    'pexels-levent-eldem-171531816-31254582.jpg',
    'pexels-lichtblick800-31280001.jpg',
    'pexels-lichtblick800-31284581.jpg',
    'pexels-lichtblick800-31284990.jpg',
    'pexels-linda-gschwentner-154780054-10977473.jpg',
    'pexels-liu-zhenao-807326-13921027.jpg',
    'pexels-liz-mango-2149714539-31278124.jpg',
    'pexels-lonnyphotography-31291598.jpg',
    'pexels-lonnyphotography-31291602.jpg',
    'pexels-lonnyphotography-31291605.jpg',
    'pexels-luis-alvarez-2150632553-31288983.jpg',
    'pexels-luoqing-31289622.jpg',
    'pexels-lyndon-liu-2150004052-31289795.jpg',
    'pexels-mahmoud-salem-899704013-31284951.jpg',
    'pexels-maii-ruengchakphet-2150209302-31261317.jpg',
    'pexels-maii-ruengchakphet-2150209302-31261319.jpg',
    'pexels-maii-ruengchakphet-2150209302-31261588 (1).jpg',
    'pexels-maii-ruengchakphet-2150209302-31261588.jpg',
    'pexels-manuschorchit-9580347.jpg',
    'pexels-marah-pascual-2150701717-31280132.jpg',
    'pexels-maria-m-1070886292-31289090.jpg',
    'pexels-mark-thomas-2149938474-31271451.jpg',
    'pexels-marta-flores-2150707489-31283789.jpg',
    'pexels-marta-flores-2150707489-31283828.jpg',
    'pexels-marta-flores-2150707489-31283837.jpg',
    'pexels-marta-flores-2150707489-31283860.jpg',
    'pexels-martijn-stoof-2150654344-31283641.jpg',
    'pexels-martijn-stoof-2150654344-31283653.jpg',
    'pexels-mary-399616125-31285253.jpg',
    'pexels-matte-31278585.jpg',
    'pexels-matteo-mazza-432250439-31274587.jpg',
    'pexels-mehul-kassi-886764-31280290.jpg',
    'pexels-melisa-uygun-2150369123-31102059.jpg',
    'pexels-michael-d-beckwith-2150568551-31270101.jpg',
    'pexels-michael-gomez-2150704214-31285680.jpg',
    'pexels-mihri-2150680379-31268581.jpg',
    'pexels-mihri-2150680379-31268706.jpg',
    'pexels-mik-dominguez-1539465333-31288909.jpg',
    'pexels-mikebirdy-31292585.jpg',
    'pexels-misael-silvera-1643179-5264122.jpg',
    'pexels-mnannapaneni-31250567.jpg',
    'pexels-mohammad-hoque-86842308-31279795.jpg',
    'pexels-mon-moore-486658790-31291725.jpg',
    'pexels-monika-balciuniene-1144471-2673239.jpg',
    'pexels-monika-mocpajchelova-2149095347-31285165.jpg',
    'pexels-monika-mocpajchelova-2149095347-31285168.jpg',
    'pexels-monika-mocpajchelova-2149095347-31285170.jpg',
    'pexels-monurblc-31282686.jpg',
    'pexels-muratak-31290513.jpg',
    'pexels-murdashots-611021625-25583958.jpg',
    'pexels-natalie-aarons-2150716083-31288238.jpg',
    'pexels-natalie-goodwin-2148267387-31265611.jpg',
    'pexels-nati-87264186-28991555.jpg',
    'pexels-natia-tavdishvili-2150706087-31282412.jpg',
    'pexels-natia-tavdishvili-2150706087-31282790.jpg',
    'pexels-natia-tavdishvili-2150706087-31289997.jpg',
    'pexels-ne-ne-364351-983254.jpg',
    'pexels-necip-duman-3299706-31270106.jpg',
    'pexels-nguy-n-ti-n-th-nh-2150376175-31201114.jpg',
    'pexels-nikolaos-ioannidis-1146633667-31289939.jpg',
    'pexels-nino-sanger-203570376-15792424.jpg',
    'pexels-ogproductionz-15825387.jpg',
    'pexels-olivia-fernandez-sosa-3216244-31261332.jpg',
    'pexels-olivia-fernandez-sosa-3216244-31261334.jpg',
    'pexels-omega-edicion-1981515491-31273208.jpg',
    'pexels-onthecrow-31043835.jpg',
    'pexels-onthecrow-31269166.jpg',
    'pexels-optical-chemist-340351297-31284696.jpg',
    'pexels-optical-chemist-340351297-31284697.jpg',
    'pexels-orange-ocean-243774902-31279424 (1).jpg',
    'pexels-orange-ocean-243774902-31279424.jpg',
    'pexels-orange-ocean-243774902-31279427.jpg',
    'pexels-orange-ocean-243774902-31279433.jpg',
    'pexels-orange-ocean-243774902-31279438.jpg',
    'pexels-osviel-rodriguez-valdes-716702230-31280681.jpg',
    'pexels-paolo-sanchez-2149881372-31091614.jpg',
    'pexels-pavan0307-31258739.jpg',
    'pexels-phamthe-31283244.jpg',
    'pexels-philipp-fahlbusch-2985340-31283636.jpg',
    'pexels-photos-by-kriz-682294282-17990855.jpg',
    'pexels-pixabay-147411.jpg',
    'pexels-pixabay-158063.jpg',
    'pexels-pixabay-206359.jpg',
    'pexels-pixabay-247599.jpg',
    'pexels-pixabay-257092.jpg',
    'pexels-pok-rie-33563-27269620.jpg',
    'pexels-qinyuan-wu-1568553214-31256505.jpg',
    'pexels-qliff-sloth-486662502-31180410.jpg',
    'pexels-qliff-sloth-486662502-31180411.jpg',
    'pexels-qliff-sloth-486662502-31180431.jpg',
    'pexels-qliff-sloth-486662502-31180432.jpg',
    'pexels-qliff-sloth-486662502-31180470.jpg',
    'pexels-quang-nguyen-vinh-222549-2166711.jpg',
    'pexels-raj-photography-83911134-31291394.jpg',
    'pexels-raouf-meftah-544066862-31281892.jpg',
    'pexels-raouf-meftah-544066862-31281898.jpg',
    'pexels-raouf-meftah-544066862-31281904.jpg',
    'pexels-raouf-meftah-544066862-31281936.jpg',
    'pexels-raouf-meftah-544066862-31281943.jpg',
    'pexels-raouf-meftah-544066862-31281968.jpg',
    'pexels-raouf-meftah-544066862-31281978.jpg',
    'pexels-raouf-meftah-544066862-31282001.jpg',
    'pexels-ratsam-31258989.jpg',
    'pexels-rehman-yousaf-321165099-31265179.jpg',
    'pexels-rehman-yousaf-321165099-31265182.jpg',
    'pexels-rehman-yousaf-321165099-31265186.jpg',
    'pexels-reinaldo-30953505.jpg',
    'pexels-reinaldo-31100323.jpg',
    'pexels-renjith-tomy-pkm-138432405-31282405.jpg',
    'pexels-rescriptt-rescriptt-101153900-31280999.jpg',
    'pexels-reyyan-505450018-30891641.jpg',
    'pexels-rhea-pasricha-2150692470-31275222.jpg',
    'pexels-robertkso-31260390.jpg',
    'pexels-rochdipz-240567277-31282061.jpg',
    'pexels-ruannanqing871-31265564.jpg',
    'pexels-rui-yang-2150067828-31279509.jpg',
    'pexels-saarthak-lawand-2150184329-31276294.jpg',
    'pexels-sabine-meier-818963894-31270166.jpg',
    'pexels-sabine-meier-818963894-31270168.jpg',
    'pexels-sam-a-351058944-31284145.jpg',
    'pexels-sam-a-351058944-31284147.jpg',
    'pexels-samara-candida-2150365613-31282343.jpg',
    'pexels-sarah-486644806-31271227.jpg',
    'pexels-sargaraj-tr-423973759-31280630.jpg',
    'pexels-sargaraj-tr-423973759-31280632.jpg',
    'pexels-sargaraj-tr-423973759-31280633.jpg',
    'pexels-sargaraj-tr-423973759-31280634.jpg',
    'pexels-sargaraj-tr-423973759-31280636.jpg',
    'pexels-sebastian-palomino-933481-1955134.jpg',
    'pexels-semih-akdag-171532967-31292572.jpg',
    'pexels-serge-vuillermoz-2150077877-31283744.jpg',
    'pexels-sethulakshmi-sajeev-1270580128-31274516.jpg',
    'pexels-shndgd-31069508.jpg',
    'pexels-shouvik-bajpayee-19937731-31287441.jpg',
    'pexels-shox-31250992.jpg',
    'pexels-sila-onorevole-2148445091-31292437.jpg',
    'pexels-sila-onorevole-2148445091-31292449.jpg',
    'pexels-simon-marsh-1983933-31266436.jpg',
    'pexels-sofianunezph-18149974.jpg',
    'pexels-song-johnny-2150145527-31268436.jpg',
    'pexels-song-johnny-2150145527-31268440.jpg',
    'pexels-song-johnny-2150145527-31268450.jpg',
    'pexels-souvenirpixels-417074.jpg',
    'pexels-stephen-leonardi-587681991-30599063.jpg',
    'pexels-steppewalker-31266930.jpg',
    'pexels-steppewalker-31266931.jpg',
    'pexels-suju-31279925.jpg',
    'pexels-szafran-31289659.jpg',
    'pexels-szymon-shields-1503561-29410276.jpg',
    'pexels-tamba09-15247738.jpg',
    'pexels-tedphen-armand-nzawou-545346612-30862171.jpg',
    'pexels-thiago-figueira-41366775-31255537.jpg',
    'pexels-thibaut-tattevin-413078552-18272824.jpg',
    'pexels-tianyun-xia-297240639-31043706.jpg',
    'pexels-totallyoutofframe-31288972.jpg',
    'pexels-tr-ng-nguy-n-thanh-2150411289-31277207.jpg',
    'pexels-tr-ng-nguy-n-thanh-2150411289-31277559.jpg',
    'pexels-tugrulkurnaz-31291986.jpg',
    'pexels-ulfet-nur-ucar-680828476-31284797.jpg',
    'pexels-umishots-29435132.jpg',
    'pexels-umishots-7904726.jpg',
    'pexels-vadutskevich-16350192.jpg',
    'pexels-vaivography-16058449.jpg',
    'pexels-valdemaras-d-784301-1824565.jpg',
    'pexels-valdemaras-dima-390773-1038786.jpg',
    'pexels-valeria-gutierrez-455901195-31257037 (1).jpg',
    'pexels-valeria-gutierrez-455901195-31257037.jpg',
    'pexels-valeria-gutierrez-455901195-31257039.jpg',
    'pexels-vanngo-ng-105653827-31274086.jpg',
    'pexels-vasilis-karkalas-155349971-31271944.jpg',
    'pexels-vasilis-karkalas-155349971-31271945.jpg',
    'pexels-vikram-aditya-213772137-31291346.jpg',
    'pexels-vikram-aditya-213772137-31291393.jpg',
    'pexels-vladyslav-huivyk-94105841-31284872.jpg',
    'pexels-vladyslav-huivyk-94105841-31284875.jpg',
    'pexels-vo-nguy-n-terri-2150303799-31287131.jpg',
    'pexels-vo-nguy-n-terri-2150303799-31287133.jpg',
    'pexels-vo-nguy-n-terri-2150303799-31287137.jpg',
    'pexels-vtnt2-31274796.jpg',
    'pexels-vtnt2-31274806.jpg',
    'pexels-walidphotoz-31291361.jpg',
    'pexels-wang-jun-2142607661-31270991.jpg',
    'pexels-wavyvisuals-377312923-18339943.jpg',
    'pexels-wavyvisuals-377312923-18818905.jpg',
    'pexels-wearelivingart-7862143.jpg',
    'pexels-wearelivingart-7862145.jpg',
    'pexels-wearelivingart-8060364.jpg',
    'pexels-wearelivingart-8134647.jpg',
    'pexels-wikii-heiwa-1193430069-21997951.jpg',
    'pexels-wyteshot-31282411.jpg',
    'pexels-yasar-biyik-2149964464-31100483.jpg',
    'pexels-yash-rai-2150686749-31271796.jpg',
    'pexels-yash-rai-2150686749-31271797.jpg',
    'pexels-yash-rai-2150686749-31271798.jpg',
    'pexels-yash-rai-2150686749-31271857.jpg',
    'pexels-yassen-kounchev-889850329-31289026.jpg',
    'pexels-yessitrex-31287597.jpg',
    'pexels-yifan-tang-94970673-15509461.jpg',
    'pexels-zarifbirsiir-31253889.jpg',
    'pexels-zarifbirsiir-31253894.jpg',
    'pexels-zeal-creatives-58866141-31283913.jpg',
    'pexels-zhenyu-peng-2150336263-31279791.jpg',
    'pexels-zlfdmr23-31283699.jpg'
];

async function seed() {
    await client.connect();
    const hash = await bcrypt.hash("testtest", 10);
    // Insert Multiple Users
    const userData = Array.from({ length: 50 }, (_, i) => ({
        username: `User ${i + 1}`,
        email: `user${i + 1}@example.com`,
        password: hash, // Assume all users have a hashed password
        role: i % 3 === 0 ? "Photographer" : "Viewer",
        profile_picture: `https://i.pravatar.cc/150?u=${i + 1}`,
        bio: "Photography lover"
    }));

    const insertedUsers = await db.insert(users).values(userData).returning();

    // Insert Categories
    const insertedCategories = await db.insert(categories).values([
        { name: "nature" },
        { name: "people" },
        { name: "urban" },
        { name: "animals" },
        { name: "abstract" },
        { name: "other" }
    ]).returning();

    const categoryIds = insertedCategories.map(cat => cat.id);

    // Insert Multiple Posts (500 total)
    const postPromises = Array.from({ length: 500 }, async (_, i) => {

        const originalFilename = files[i]
        const filename = files[i] + '_' + files[i].replace(files[i], randomUUID())

        const dimension = await imageSizeFromFile(path.join(process.cwd(), "/public/uploads/", filename))
        const isVertical = dimension.height > dimension.width

        const user = insertedUsers[i % insertedUsers.length];
        const category = categoryIds[i % categoryIds.length];

        return {
            title: `Photo ${i + 1}`,
            filename: originalFilename,
            description: `Description for photo ${i + 1}`,
            user_id: user.id,
            file_path: filename,
            category_id: category,
            likes: 0,
            isVertical: isVertical
        };
    });

    const postData = await Promise.all(postPromises);
    const insertedPosts = await db.insert(posts).values(postData).returning();

    // Insert Likes (Each post gets likes from random users)
    interface LikeData {
        user_id: number;
        photo_id: number;
    }

    const likeData: LikeData[] = [];
    insertedPosts.forEach((post) => {
        const shuffledUsers = [...insertedUsers].sort(() => 0.5 - Math.random()).slice(0, Math.floor(Math.random() * 10) + 1);
        shuffledUsers.forEach((user) => {
            likeData.push({ user_id: user.id, photo_id: post.id });
        });
    });

    await db.insert(likes).values(likeData);

    console.log("âœ… Database seeded with 50 users, 500 posts, and likes successfully!");
    await client.end();
}

seed().catch(console.error);
